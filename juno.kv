<ButonMeniu@Button>:
    size_hint_y: None
    height: '48dp'
    background_color: 0, 0, 0, 0  # Transparent
    color: 1, 1, 1, 1             # Text Alb
    canvas.before:
        Color:
            rgba: 0.2, 0.2, 0.2, 1 # Fundal gri inchis
        Rectangle:
            pos: self.pos
            size: self.size
<BackButton>:
    text: "‹"           # Simbol de săgeată (Unicode)
    font_size: '35sp'   # Facem săgeata mare și vizibilă
    size_hint: None, None
    size: '50dp', '50dp'
    background_color: 0, 0, 0, 0  # Fundal transparent
    color: 0, 0, 0, 1             # Culoare neagră (pentru fundal alb)
    bold: True
    # Efect de feedback la apăsare
    canvas.before:
        Color:
            rgba: (0.9, 0.9, 0.9, 1) if self.state == 'down' else (0, 0, 0, 0)
        Ellipse:
            pos: self.pos
            size: self.size

<MasaButton>
# Design simplu: pătrat cu text

    font_size: '14sp'
    background_normal: ""
    background_color:
        # Logica culorilor
        (0.8, 0.2, 0.2, 1) if self.stare == "rezervat" else \
        (1, 0.6, 0, 1) if self.stare == "selectat" else \
        (0.2, 0.6, 0.2, 1) # Verde pentru liber
    on_release: root.gestioneaza_click_masa(self) if hasattr(root, 'gestioneaza_click_masa') else None





<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [40, 100, 40, 100]
        spacing: 20
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Fundal alb
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'logo.png'
            size_hint_y: None
            height: '100dp'
        Label:
            text: ""
            color: 0, 0, 0, 1
            font_size: '24sp'
            bold: True
        TextInput:
            id: user_input
            hint_text: "Username"
            multiline: False
            size_hint_y: None
            height: '45dp'

        TextInput:
            id: pass_input
            hint_text: "Password"
            password: True
            multiline: False
            size_hint_y: None
            height: '45dp'

        # Label pentru EROARE
        Label:
            id: error_label
            text: ""
            color: 1, 0, 0, 1  # Culoare ROȘIE
            font_size: '14sp'
            size_hint_y: None
            height: '20dp'

        Button:
            text: "LOG IN"
            size_hint_y: None
            height: '50dp'
            background_color: 0.1, 0.1, 0.1, 1
            on_release: root.verifica_login(user_input.text, pass_input.text)

        Button:
            text: "Don't have an account? Create one!"
            size_hint_y: None
            height: '40dp'
            background_color: 0, 0, 0, 0
            color: 0.3, 0.3, 0.3, 1
            on_release: root.creeaza_cont(user_input.text, pass_input.text)
        Label:
            text: ""
            color: 0, 0, 0, 1
            font_size: '24sp'
            bold: True
<MeniuNavigare>:
    auto_width: False
    width: '300dp'

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: self.minimum_height

        ButonMeniu:
            text: "BOOK A TABLE"
            on_release: root.mergi_la("rezerva")
        ButonMeniu:
            text: "FOOD & DRINKS"
            on_release: root.mergi_la("meniu")
        ButonMeniu:
            text: "LOG OUT"
            on_release: root.logout()

<HomeScreen>:
    JunoMainLayout

<LabelCategorie@Label>:
    size_hint_y: None
    height: '50dp'
    bold: True
    color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgba: 0.2, 0.15, 0.1, 1  # Maro Juno
        Rectangle:
            pos: self.pos
            size: self.size

<ProdusItem@BoxLayout>:
    nume: ""
    pret: ""
    desc: ""
    callback: None  # Variabilă pentru a reține funcția de adăugare
    orientation: 'horizontal' # Schimbăm în horizontal pentru a pune butonul în dreapta
    size_hint_y: None
    height: '90dp'
    padding: [20, 10]

    # Partea stângă cu textele (Nume, Descriere, Preț)
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: root.nume
            color: 0, 0, 0, 1
            bold: True
            halign: 'left'
            text_size: self.width, None
        Label:
            text: root.desc
            color: 0.5, 0.5, 0.5, 1
            font_size: '12sp'
            halign: 'left'
            text_size: self.width, None
        Label:
            text: root.pret
            color: 0.1, 0.4, 0.1, 1
            bold: True
            halign: 'left'
            text_size: self.width, None

    # Butonul de adăugare în coș (Dreapta)
    Button:
        text: "+"
        size_hint_x: None
        width: '50dp'
        background_color: 0.1, 0.1, 0.1, 1
        color: 1, 1, 1, 1
        on_release: if root.callback: root.callback(root.nume, root.pret)

<CatalogMeniuScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Fundal Alb
            Rectangle:
                pos: self.pos
                size: self.size


        BoxLayout:
            size_hint_y: 0.1
            padding: 10
            canvas.before:
                Color:
                    rgba: 0.95, 0.95, 0.95, 1 # Gri foarte deschis pentru header
                Rectangle:
                    pos: self.pos
                    size: self.size
            BackButton:
                on_release: app.root.current = "home"
            Label:
                text: "MENIU JUNO"
                color: 0, 0, 0, 1
                bold: True
                halign: 'center'
                valign: 'middle'
                text_size: self.size
            Widget:
                size_hint_x: None
                width: '80dp'

        # Zona de Scroll pentru produse
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                id: container_produse
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: [0, 10]
                spacing: 2

<RezervaScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Fundal închis la culoare
            Rectangle:
                pos: self.pos
                size: self.size
        BackButton:
            on_release: app.root.current = "home"

        Label:
            text: "BOOK A TABLE"
            font_size: '24sp'
            bold: True
            color: 0,0,0,1
            size_hint_y: None
            height: '50dp'
        BoxLayout:
            orientation: 'vertical'
            padding: 15
            spacing: 8
            canvas.before:
                Color:
                    rgba: 1,1,1,1 # FUNDAL alb
                Rectangle:
                    pos: self.pos
                    size: self.size

                # 1. SELECTARE INTERVAL (ORA)
            Label:
                text: "AT:"
                size_hint_y: None
                height: "25dp"
                halign: "left"
                text_size: self.size
                color: 0, 0, 0, 1
            ScrollView:
                size_hint_y: None
                height: "50dp"  # Puțin mai înalt pentru a nu tăia butoanele
                do_scroll_y: False
                do_scroll_x: True
                bar_width: 2

                GridLayout:
                    rows: 1
                    size_hint_x: None
                    width: self.minimum_width  # Această linie permite scroll-ul
                    spacing: 10
                    padding: [5, 5]
                    Button:
                        text: "12:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "12:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("12:00")
                    Button:
                        text: "13:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "13:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("13:00")
                    Button:
                        text: "14:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "14:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("14:00")
                    Button:
                        text: "15:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "15:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("15:00")
                    Button:
                        text: "16:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "16:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("16:00")
                    Button:
                        text: "17:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "17:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("17:00")
                    Button:
                        text: "18:00"
                        size_hint_x: None
                        width: "80dp"
                        background_normal: ""
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "18:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("18:00")
                    Button:
                        text: "19:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "19:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("19:00")
                    Button:
                        text: "20:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "20:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("20:00")
                    Button:
                        text: "21:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "21:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("21:00")
                    Button:
                        text: "22:00"
                        background_normal: ""
                        size_hint_x: None
                        width: "80dp"
                        background_color: (0.1, 0.5, 0.8, 1) if root.interval_selectat == "22:00" else (0.2, 0.2, 0.2, 1)
                        on_release: root.selecteaza_timp("22:00")

                # 2. SELECTARE DURATĂ
            Label:
                text: "FOR:"
                size_hint_y: None
                height: "25dp"
                halign: "left"
                text_size: self.size
                color: 0, 0, 0, 1

            BoxLayout:
                size_hint_y: None
                height: "40dp"
                spacing: 10
                Button:
                    text: "1 HOUR"
                    background_normal: ""
                    background_color: (0.1, 0.5, 0.8, 1) if root.durata_selectata == "1 ORĂ" else (0.2, 0.2, 0.2, 1)
                    on_release: root.selecteaza_durata("1 ORĂ")
                Button:
                    text: "2 HOURS"
                    background_normal: ""
                    background_color: (0.1, 0.5, 0.8, 1) if root.durata_selectata == "2 ORE" else (0.2, 0.2, 0.2, 1)
                    on_release: root.selecteaza_durata("2 ORE")
        # Mesajul de status (Extra)
        Label:
            text: root.mesaj_status
            color: (1, 1, 0, 1) if "selectată" in root.mesaj_status else (1, 1, 1, 1)
            size_hint_y: None
            height: '30dp'



        # Grila de mese
        GridLayout:
            id: grid_mese
            cols: 2 # 2 coloane, deci 5 rânduri pentru 10 mese
            spacing: 15
            padding: 10

            # Generăm mesele manual pentru control total
            MasaButton:
                numar: "1"
                text: "Table 1"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "2"
                text: "Table 2"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "3"
                text: "Table 3"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "4"
                text: "Table 4"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "5"
                text: "Table 5"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "6"
                text: "Table 6"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "7"
                text: "Table 7"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "8"
                text: "Table 8"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "9"
                text: "Table9"
                on_release: root.gestioneaza_click_masa(self)
            MasaButton:
                numar: "10"
                text: "Table 10"
                on_release: root.gestioneaza_click_masa(self)

        # Butonul de confirmare
        Button:
            text: "CONFIRM"
            size_hint_y: None
            height: '60dp'
            background_normal: ""
            # Dezactivat vizual dacă nu sunt selecții
            background_color: (0, 0, 0, 1) if root.confirmare_activa else (0.2, 0.2, 0.2, 1)
            disabled: not root.confirmare_activa
            on_release: root.confirma_rezervarea()


<JunoMainLayout>:
    orientation: 'vertical'

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    # HEADER
    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: 0.08
        padding: [10, 5]
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Button:
            text: "MENU"
            font_name: 'Roboto' # Sau un font serif dacă ai instalat
            letter_spacing: 2    # Spațiere între litere pentru lux
            background_normal: ''
            background_color: 0, 0, 0, 0
            color: 0, 0, 0, 1
            size_hint: None, None
            size: '80dp', '40dp'
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    width: 1
                    rectangle: (self.x, self.y, self.width, self.height)
            on_release: root.deschide_meniu(self)


        Image:
            source: 'logo.png'
            fit_mode: 'contain'
            size_hint_x: None
            width: '200dp'

        Button:
            background_normal: 'cos8.png'
            background_down: 'cos8.png'
            size_hint: None, None
            size: '75dp', '70dp'
            pos_hint: {'center_y': 0.5}
            on_release: app.root.current = "cos"

    #  CONTINUT
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        spacing: 20

        Video:
            source: 'juno.mp4'
            state: 'play'
            options: {'eos': 'loop'}
            allow_stretch: True
            fit_mode: 'cover'

        # Titlu
        Label:
            text: "Juno Wine Garden"
            color: 0, 0, 0, 1
            font_size: '20sp'
            bold: True
            size_hint_y: None
            height: self.texture_size[1] + 20
            halign: 'center'
            valign: 'middle'
            text_size: self.width, None

        # Textul descriptiv
        Label:
            text: 'Welcome to Juno Garden! An enchanting destination offering fine wine, delectable cuisine, coffee, craft beers, and live music.'
            color: 0.2, 0.2, 0.2, 1
            font_size: '16sp'
            size_hint_y: None
            height: self.texture_size[1]
            halign: 'center'
            valign: 'top'
            text_size: self.width, None


        Label:
            text: "Strada Dupa Ziduri Brasov\nLuni, Miercuri, Joi, Duminca: 12:00 - 00:00\nMarti: 16:00 - 00\nVineri - Sâmbătă: 12:00 - 00:00"
            color: 0.3, 0.3, 0.3, 1
            font_size: '11sp'
            halign: 'center'
            valign: 'top'
            line_height: 1.2
            text_size: self.width, None

<CosScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Header Coș
        BoxLayout:
            size_hint_y: 0.1
            padding: 10
            canvas.before:
                Color:
                    rgba: 0.9, 0.9, 0.9, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            BackButton:
                on_release: app.root.current = "home"
            Label:
                text: "Your Order"
                color: 0, 0, 0, 1
                bold: True
                halign: 'center'
                valign: 'middle'
                text_size: self.size
            Widget:
                size_hint_x: None
                width: '80dp'

        # Lista de produse (Scrollable)
        ScrollView:
            do_scroll_x:False
            BoxLayout:
                id: produse_cos
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: 10
                spacing: 5

        # Footer cu Total și Butoane
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.2
            padding: 15
            spacing: 10
            Label:
                id: total_label
                text: "TOTAL: 0 RON"
                color: 0, 0, 0, 1
                font_size: '20sp'
                bold: True

            BoxLayout:
                spacing: 10
                Button:
                    text: "Empty"
                    background_color: 0.8, 0, 0, 1
                    on_release: root.sterge_cos()
                Button:
                    text: "Place Order"
                    background_color: 0.1, 0.4, 0.1, 1
                    bold: True
                    on_release: root.trimite_comanda()
